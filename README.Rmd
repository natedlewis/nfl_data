---
title: "README.Rmd"
author: "Nate Lewis"
date: "2021-06-09"
output: github_document
---

Load libraries
```{r message=FALSE}
library(nflfastR)
library(tidyverse)
library(qs)
```

Initial play-by-play load 
```{r message=FALSE}
future::plan("multisession")
pbp <- nflfastR::load_pbp(2010:2020, qs = TRUE) %>% 
  progressr::with_progress()
```

Filter out dead plays
```{r message=FALSE}
data <- pbp %>%
  dplyr::filter(
    !is.na(.data$down),
    .data$play_type %in% c("pass", "qb_kneel", "qb_spike", "run")
  ) %>%
  decode_player_ids()
```

Get game data
```{r}
# get game data
s_type <- pbp %>%
  dplyr::select(.data$season, .data$season_type, .data$week) %>%
  dplyr::distinct()
```

Load weekly stats
```{r message=FALSE}
raw_wkly <- calculate_player_stats(pbp, weekly = TRUE) %>% 
  progressr::with_progress()
```

Load game data
```{r message=FALSE}
games <- read_csv("https://raw.githubusercontent.com/nflverse/nfldata/master/data/games.csv")
games <- clean_games(games)
```

Load historical ADP
```{r}
adp <- read_csv("adp_all.csv") 
```

The pattern argument uses regular expressions. You can use a caret ^ to match the beginning of the string:
```{r}
rm(list=ls(pattern="^tp_"))
rm(list=setdiff(ls(pattern = "^tp_"), lsf.str()))
```
Other patterns for managing temporary items / keeping clean workspaces than name prefixes.
```{r}
temp<-new.env()
temp$x <- 1
temp$y <- 2
with(temp,x+y)
#> 3
rm(temp)
```
